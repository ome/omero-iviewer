<template>
    <require from="./regions-list"></require>
    <require from="./regions-drawing"></require>
    <require from="./regions-edit"></require>

    <div class="regions-container"
         show.bind="image_info.projection !== 'split'">

        <div class="regions-tools">
            <div class="shapes-persistence">
                <div class="btn-group">
                    <button type="button" class="btn btn-default btn-sm"
                        disabled.bind="!(regions_info.history &&
                            regions_info.history.history.length > 0 &&
                            regions_info.history.historyPointer >= 0) ||
                            !regions_info.image_info.can_annotate"
                        click.delegate="saveShapes()"
                        title="${!regions_info.image_info.can_annotate ?
                                    'No permission to save' : ''}">Save
                    </button>
                    <button type="button"
                        disabled.bind="!(regions_info.history &&
                            regions_info.history.history.length > 0 &&
                            regions_info.history.historyPointer >= 0)"
                        class="btn btn-default btn-sm"
                        click.delegate="undoHistory()">Undo
                    </button>
                    <button type="button"
                        disabled.bind="!(regions_info.history &&
                            regions_info.history.history.length > 0 &&
                            regions_info.history.historyPointer <
                            regions_info.history.history.length-1)"
                        class="btn btn-default btn-sm"
                        click.delegate="redoHistory()">Redo
                    </button>
                </div>

                <div show.bind="regions_info.ready"
                     class="checkbox checkbox-settings" style="line-height: 20px;">
                    <label>
                        <input style="line-height: 20px;" type="checkbox"
                        change.delegate="showComments($event.target.checked)">
                        Show Comments
                    </label>
                </div>

            </div>

            <regions-edit regions_info.bind="regions_info"></regions-edit>

            <hr show.bind="regions_info !== null && regions_info.ready &&
                           regions_info.image_info.can_annotate"
                regions_info.bind="regions_info" />
            <regions-drawing show.bind="regions_info !== null &&
                                        regions_info.ready &&
                                        regions_info.image_info.can_annotate"
                             regions_info.bind="regions_info">
            </regions-drawing>
            <hr />
        </div>
        <regions-list show.bind="regions_info.ready"
                      regions_info.bind="regions_info">
        </regions-list>
        <div style="position: relative;top: 20%;text-align: center"
             class="disabled-color"
             show.bind="!regions_info.ready">Loading Regions ...</div>

    </div>
</template>
