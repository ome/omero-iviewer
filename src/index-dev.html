<!--
    Copyright (C) 2017 University of Dundee & Open Microscopy Environment.
    All rights reserved.

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as
    published by the Free Software Foundation, either version 3 of the
    License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

<!DOCTYPE html>
<html>
  <head>
      <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
      <link rel="stylesheet" type="text/css" href="css/theme.css" />
      <link rel="stylesheet" type="text/css" href="css/spinner.css" />
      <link rel="stylesheet" type="text/css" href="css/slider.css" />
      <link rel="stylesheet" type="text/css" href="css/spectrum.css" />
      <link rel="stylesheet" type="text/css" href="css/ol3-viewer.css" />
      <link rel="stylesheet" type="text/css" href="css/app.css" />

      <script type="text/javascript">
        // modify according to your needs
        // in particular: choose an existing id !
        window.INITIAL_REQUEST_PARAMS = {
                'VERSION': "DEV_SERVER",
                'WEB_API_BASE': 'api/v0/',
                'ROI_PAGE_SIZE': '500',
                'MAX_PROJECTION_BYTES': "268435456", // 1024 * 1024 * 256
                // 'IMAGES': "1"   // "4420" // "73537",
                //'ROI_COLOR_PALETTE': '["rgb(0,255,0)","blue","blue","pink","blue"],["rgb(255,255,255)"]',
                'ENABLE_MIRROR': 'True',
                'FY': 'true',
                //'SHOW_PALETTE_ONLY': true,
                'DATASET': "1",
                //'WELL': "1"
        };
        // check if we need to log in
        // regular redirect logic of server
        // fails with different origin (proxy)
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                if (xhttp.responseText !== 'OK') {
                    window.location.replace(
                        'http://localhost:8080/webclient/login?url=http://localhost:8080/');
                }
                return;
            } else if (this.readyState == 4) {
                alert('Check if your OMERO server is running');
            }
        };
        xhttp.open("GET", "webclient/keepalive_ping", true);
        xhttp.send();
      </script>

      <title>OMERO.iviewer</title>
  </head>

  <body class="container-fluid">
  </body>

</html>
